"use strict";(self.webpackChunkpk_connect=self.webpackChunkpk_connect||[]).push([[28],{28:(e,t,n)=>{n.r(t),n.d(t,{bootstrap:()=>w,default:()=>g,mount:()=>x,unmount:()=>b});var r=n(861),o=n(885),a=n(757),c=n.n(a),u=n(271),s=n.n(u),l=n(650),i=n.n(l),m=n(577),p=n(220),h=n(277),d=n(788),f=n.n(d),k=(0,m.Z)({seed:"pk-connect",productionPrefix:"pk-connect"}),v=(0,p.Z)((function(e){return{status:{color:"lime"},modal:{position:"fixed",zIndex:"500",width:"100%",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},modalContent:{width:"300px",height:"200px"}}}));function g(){var e=v(),t=localStorage.getItem("token"),n=(0,u.useState)(t&&JSON.parse(t).value),a=(0,o.Z)(n,2),l=a[0],i=a[1];return(0,u.useEffect)((0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("https://pk-center.herokuapp.com/auth/reconnect",{method:"POST",headers:{Authorization:"Bearer ".concat(l)}}).then((function(e){if(e.status>=400&&e.status<600)throw new Error("Bad response from server");return e})).catch((function(e){localStorage.removeItem("token"),i(null)}));case 4:case"end":return e.stop()}}),e)}))),[]),s().createElement(h.ZP,{generateClassName:k},s().createElement(s().Fragment,null,l&&s().createElement("div",{className:e.status},"connected"),!l&&s().createElement("div",{className:e.modal},s().createElement("div",{className:e.modalContent},s().createElement("button",null,"Play as guest"),s().createElement("button",{onClick:function(){location.href="https://pk.land/#/account/login"}},"Login PK account")))))}var E=f()({React:s(),ReactDOM:i(),rootComponent:g,errorBoundary:function(e,t,n){return s().createElement("div",null,"This renders when a catastrophic error occurs")}}),w=E.bootstrap,x=E.mount,b=E.unmount}}]);