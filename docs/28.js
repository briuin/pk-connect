"use strict";(self.webpackChunkpk_connect=self.webpackChunkpk_connect||[]).push([[28],{28:(e,n,t)=>{t.r(n),t.d(n,{bootstrap:()=>k,default:()=>h,mount:()=>v,unmount:()=>g});var r=t(861),c=t(885),o=t(757),a=t.n(o),s=t(271),u=t.n(s),l=t(650),i=t.n(l),p=t(577),m=t(788),d=t.n(m);function h(){var e=localStorage.getItem("token"),n=(0,s.useState)(e&&JSON.parse(e).value),t=(0,c.Z)(n,2),o=t[0],l=t[1];return(0,s.useEffect)((0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("https://pk-center.herokuapp.com/auth/reconnect",{method:"POST",headers:{Authorization:"Bearer ".concat(o)}}).then((function(e){if(e.status>=400&&e.status<600)throw new Error("Bad response from server");return e})).catch((function(e){localStorage.removeItem("token"),l(null)}));case 4:case"end":return e.stop()}}),e)}))),[]),u().createElement(u().Fragment,null,o&&u().createElement("div",{className:"pkc-status"},"connected"),!o&&u().createElement("div",{className:"pkc-modal"},u().createElement("div",{className:"pkc-modal-content"},u().createElement("button",null,"Play as guest"),u().createElement("button",{onClick:function(){location.href="https://pk.land/#/account/login"}},"Login PK account"))))}t(918),(0,p.Z)({seed:"pk-connect",productionPrefix:"pk-connect"});var f=d()({React:u(),ReactDOM:i(),rootComponent:h,errorBoundary:function(e,n,t){return u().createElement("div",null,"This renders when a catastrophic error occurs")}}),k=f.bootstrap,v=f.mount,g=f.unmount},279:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(81),c=t.n(r),o=t(645),a=t.n(o)()(c());a.push([e.id,'.pkc-status {\n  color: "lime";\n}\n.pkc-modal {\n  position: "fixed";\n  z-index: "500";\n  width: "100%";\n  height: "100vh";\n  display: "flex";\n  justify-content: "center";\n  align-items: "center";\n}\n.pkc-modal-content {\n  width: "300px";\n  height: "200px";\n}\n',""]);const s=a},918:(e,n,t)=>{var r=t(379),c=t.n(r),o=t(279);c()(o.Z,{insert:"head",singleton:!1}),o.Z.locals}}]);