"use strict";(self.webpackChunkpk_connect=self.webpackChunkpk_connect||[]).push([[373],{975:(e,n,t)=>{t.d(n,{NU:()=>m,ZP:()=>f});var o,r=t(462),c=t(987),i=t(271),s=t.n(i),a=t(577),u=t(258),l=t(867),d=(0,u.Ue)((0,l.Z)()),h={disableGeneration:!1,generateClassName:(0,a.Z)(),jss:d,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},m=s().createContext(h);function f(e){var n=e.children,t=e.injectFirst,i=void 0!==t&&t,a=e.disableGeneration,d=void 0!==a&&a,h=(0,c.Z)(e,["children","injectFirst","disableGeneration"]),f=s().useContext(m),p=(0,r.Z)({},f,{disableGeneration:d},h);if(!p.jss.options.insertionPoint&&i&&"undefined"!=typeof window){if(!o){var k=document.head;o=document.createComment("mui-inject-first"),k.insertBefore(o,k.firstChild)}p.jss=(0,u.Ue)({plugins:(0,l.Z)().plugins,insertionPoint:o})}return s().createElement(m.Provider,{value:p},n)}},373:(e,n,t)=>{t.r(n),t.d(n,{mountElement:()=>y});var o=t(271),r=t.n(o),c=t(650),i=t.n(c),s=t(577),a=t(975),u=t(861),l=t(885),d=t(757),h=t.n(d),m=t(220),f=t(788),p=t.n(f),k=t(671),v=t(144),C=t(942),g=t(213),Z=t.n(g);new(function(){function e(){(0,k.Z)(this,e),(0,C.Z)(this,"isConnecting",!1),(0,C.Z)(this,"socket",null)}return(0,v.Z)(e,[{key:"isConnected",value:function(){return this.socket&&this.socket.connected||!1}},{key:"init",value:function(e){this.isConnecting||this.socket||(this.socket=Z()(e,{withCredentials:!0}),this.isConnecting=!0,this.socket.on("connect",this.onConnect))}},{key:"onConnect",value:function(e){this.isConnecting=!1,console.log("connected")}}]),e}());var E=(0,m.Z)((function(e){return{status:{color:"lime"},modal:{position:"fixed",zIndex:"500",margin:"100px auto"}}}));function b(){var e=E(),n=localStorage.getItem("token"),t=(0,o.useState)(n&&JSON.parse(n).value),c=(0,l.Z)(t,2),i=c[0],s=c[1];return i&&(0,o.useEffect)((0,u.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://pk-center.herokuapp.com/auth/reconnect",{method:"POST",headers:{Authorization:"Bearer ".concat(i)}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),s(null);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))),r().createElement(r().Fragment,null,i&&r().createElement("div",{className:e.status},"connected"),!i&&r().createElement("div",{className:e.modal},r().createElement("button",null,"Play as guest"),r().createElement("button",{onClick:function(){location.href="https://pk.land/#/account/login"}},"Login PK account")))}var w=p()({React:r(),ReactDOM:i(),rootComponent:b,errorBoundary:function(e,n,t){return r().createElement("div",null,"This renders when a catastrophic error occurs")}}),x=(w.bootstrap,w.mount,w.unmount,(0,s.Z)({productionPrefix:"pk-connect"}));const P=function(){return r().createElement("div",null,r().createElement(a.ZP,{generateClassName:x},r().createElement(b,null)))};var y=function(e){i().render(r().createElement(P,null),e)}}}]);