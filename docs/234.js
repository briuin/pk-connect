"use strict";(self.webpackChunkpk_connect=self.webpackChunkpk_connect||[]).push([[234],{234:(e,n,t)=>{t.r(n),t.d(n,{mountElement:()=>Z});var r=t(271),c=t.n(r),o=t(650),a=t.n(o),u=t(577),l=t(934),s=t(861),i=t(885),p=t(757),m=t.n(p),d=t(788),h=t.n(d),f=t(379),k=t.n(f),v=t(279);function E(){var e=localStorage.getItem("token"),n=(0,r.useState)(e&&JSON.parse(e).value),t=(0,i.Z)(n,2),o=t[0],a=t[1];return(0,r.useEffect)((0,s.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("https://pk-center.herokuapp.com/auth/reconnect",{method:"POST",headers:{Authorization:"Bearer ".concat(o)}}).then((function(e){if(e.status>=400&&e.status<600)throw new Error("Bad response from server");return e})).catch((function(e){localStorage.removeItem("token"),a(null)}));case 4:case"end":return e.stop()}}),e)}))),[]),c().createElement(c().Fragment,null,o&&c().createElement("div",{className:"pkc-status"},"connected"),!o&&c().createElement("div",{className:"pkc-modal"},c().createElement("div",{className:"pkc-modal-content"},c().createElement("button",null,"Play as guest"),c().createElement("button",{onClick:function(){location.href="https://pk.land/#/account/login"}},"Login PK account"))))}k()(v.Z,{insert:"head",singleton:!1}),v.Z.locals,(0,u.Z)({seed:"pk-connect",productionPrefix:"pk-connect"});var g=h()({React:c(),ReactDOM:a(),rootComponent:E,errorBoundary:function(e,n,t){return c().createElement("div",null,"This renders when a catastrophic error occurs")}}),x=(g.bootstrap,g.mount,g.unmount,(0,u.Z)({productionPrefix:"pk-connect"}));const w=function(){return c().createElement("div",null,c().createElement(l.ZP,{generateClassName:x},c().createElement(E,null)))};var Z=function(e){a().render(c().createElement(w,null),e)}},279:(e,n,t)=>{t.d(n,{Z:()=>u});var r=t(81),c=t.n(r),o=t(645),a=t.n(o)()(c());a.push([e.id,'.pkc-status {\n  color: "lime";\n}\n.pkc-modal {\n  position: "fixed";\n  z-index: "500";\n  width: "100%";\n  height: "100vh";\n  display: "flex";\n  justify-content: "center";\n  align-items: "center";\n}\n.pkc-modal-content {\n  width: "300px";\n  height: "200px";\n}\n',""]);const u=a}}]);